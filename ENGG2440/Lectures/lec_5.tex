\chapter{Set Theory and Counting Principle}

\section{Set Theory}

\begin{definition}
    Set is a collection of elements, in which each element appears only once. 
\end{definition}

\begin{definition}
    Given a set \(S\), the number of elements in \(S\) is denoted by \(\vert S \vert \). The quantity \(\vert S \vert \) is also referred to as the \textbf{cardinality} of \(S\).
\end{definition}

A set with no elements in it is called an empty set, which is denoted by \(\varnothing\).

\begin{definition}
    Given two sets \(S\) and \(T\), we say that \(T\) is a subset of \(S\), denoted by \(T \subseteq S\), if every element in \(T\) is also in \(S\). It follows that if \(T \subseteq S\), then \(\vert T \vert \leq \vert S \vert \). 
\end{definition}
For example, let
\[
    S = \{1, 2, 3, 4, 5\},\quad T = \{2, 4\}, \quad U = \{2, 4, 6\}
\]

Then, we have \(T \subseteq S\) and \(T \subseteq U\).

\begin{definition}
    Let \(S_1\) and \(S_2\) be two given sets. 

    The union of \(S_1\) and \(S_2\), denoted by \(S_1 \cup S_2\), is the set containing all elements from both \(S_1\) and \(S_2\). 

    The intersection of \(S_1\) and \(S_2\), denoted by \(S_1 \cap S_2\), is the set containing all elements that are common to both \(S_1\) and \(S_2\). 
\end{definition}
We can also see union as the relationship "or", while intersection is the relationship "and".

\begin{definition}
    Now, let \(S\) be a set and \(m \geq 1\) be an integer. A partition of \(S\) into \(m\) parts is a collection of \(m\) subsets of \(S\), denoted by \(S_1, \dots, S_m\), with the following properties:
    \begin{itemize}
        \item Exhaustion: \(S = S_1 \cup S_2 \cup \cdots \cup S_m.\)
        \item Non-Overlapping: \(\text{For}\ i \neq j\), we have \(S_i \cap S_j = \varnothing\)
    \end{itemize}
\end{definition}

\section{Counting Principle}
\subsection{Addition Principle}
Given \(S = \{1, 2, 3, 4, 5\}\). Let \(S_1 = \{1, 2\}, S_2 = \{3\}, S_3 = \{4, 5\}\) form a partition of \(S\) with 3 parts. Then, the cardinality of \(S\) can be determined by the cardinalities of the constituent parts, i.e. 
\[
    \vert S \vert = \vert S_1 \vert + \vert S_2 \vert + \cdots + \vert S_m \vert. 
\]

\begin{eg}[Count the number of binary strings of length \(n\) with no consecutive 1's.]

    Let \(S\) be the desired string, then we can apply the addition principle.

    Let \(S_0\) be the set of strings in \(S\) that start with 0; \(S_1\) be the set of strings in \(S\) that start with 1. We have \(\vert S \vert = \vert S_0 \vert + \vert S_1 \vert\).

    We can set up a recurrence relationship. Let \(\vert S \vert = T(n)\). Then, we have \(\vert S_0 \vert = T(n - 1)\) and \(\vert S_1 \vert = T(n - 2)\).Then we have 
    \[
        \vert S \vert = T(n) = T(n - 1) + T(n - 2)
    \]
    Using the initial conditions \(T(1) = 2\) (string starts with 1 or 0) and \(T(2) = 3\) (if the string starts with 1, then we have only one option for the next digit; otherwise, we have two options), one can find the number of the desired binary strings. 
\end{eg}

\subsection{Multiplication Principle}
If each element in \(S\) can be generated by performing an ordered sequence of actions, say, \(A_1, A_2, \dots, A_N\), and action \(A_i\) has \(p_i\) choices, where \(i = 1, \dots, N\), then the cardinality of \(S\) can be computed by
\[
    \vert S \vert = p_1 \times p_2 \times \cdots \times p_N
\] 

\begin{eg}
    To count the number of integers between 0 and 9999 that have exactly one digit equal to 5, let \(S\) be the set of such integers. We can then partition this set to \(S_1, S_2, S_3, S_4\),  where \(S_1\) is the set of integers in \(S\) with "5" appearing in the first position from the right, and so on. For example, \(2051 \in S_2\). By the addition principle, we have
    \[
        \vert S \vert = \vert S_1 \vert + \vert S_2 \vert + \vert S_3 \vert + \vert S_4 \vert 
    \]
    Since every integer in \(S_1\) takes the form \(xxx5\), with each "\(x\)" having 9 choices. We then have \(\vert S_1 \vert = 9^3\). It holds true for the other sets. Hence, we have \(\vert S \vert = 4 * 9^3 = 2916\)
\end{eg}

\begin{eg}
    Let us count the number of odd integers between 1000 and 9999 that have all distinct digits. Let \(S\) be the set of such integers. 
    
    \textbf{Method 1:} Observe that each integer in \(S\) can be generated by the following ordered sequence of action:
    \begin{table}[H]
        \centering
        \begin{tabular}{c|c|c}
                action & choices & no. of choices  \\
            \midrule
                \(A_1:\) pick the unit digit & \(\{1, 3, 5, 7, 9\}\)  & 5  \\
                \(A_2:\) pick the tens digit & \(\{0, 1, \dots, 9\}\) except the digit chosen in \(A_1\) & 9  \\
                \(A_3:\) pick the hundreds digit & \(\{0, 1, \dots, 9\}\) except the digit chosen in \(A_1, A_2\) & 8  \\
                \(A_4:\) pick the thousands digit & \(\{1, \dots, 9\}\) except the digit chosen in \(A_1, A_2, A_3\) & ?  \\
        \end{tabular}
    \end{table}
    We cannot find the choice for \(A_4\) directly since 0 may or may not be chosen in the previous cases. Thus, we can partition \(S\) into

    \(S_1\): set of integers in \(S\) whose tens digit is 0 \(\implies \vert S_1 \vert = 5 \times 1 \times 8 \times 7 = 280\),

    \(S_1\): set of integers in \(S\) whose hundreds digit is 0 \(\implies \vert S_2 \vert = 5 \times 8 \times 1 \times 7 = 280\),

    \(S_3\): set of integers in \(S\) with no 0 \(\implies \vert S_3 \vert = 5 \times 8 \times 7 \times 6 = 1680\).

    Then we have \(\vert S \vert = 280 + 280 + 1680 = 2240\). 
    \newpage
    \textbf{Method 2:} Consider a different sequence of actions:
    \begin{table}[H]
        \centering
        \begin{tabular}{c|c|c}
                action & choices & no. of choices  \\
            \midrule
                \(A_1:\) pick the unit digit & \(\{1, 3, 5, 7, 9\}\)  & 5  \\
                \(A_2:\) pick the thousands digit & \(\{1, \dots, 9\}\) except the digit chosen in \(A_1\) & 8  \\
                \(A_3:\) pick the tens digit & \(\{0, 1, \dots, 9\}\) except the digit chosen in \(A_1, A_2\) & 8  \\
                \(A_4:\) pick the hundreds digit & \(\{0, 1, \dots, 9\}\) except the digit chosen in \(A_1, A_2, A_3\) & 7  \\
        \end{tabular}
    \end{table}
    Then we have \(\vert S \vert = 5 \times 8 \times 8 \times 7 = 2240\). 
\end{eg}

\subsection{Subtraction Principle}
\begin{definition}
    Let \(S\) be a set and \(A \subseteq S\) be a subset of \(S\). The complement of \(A\) in \(S\), denoted by \(\overline{A}\), is the set that contains all the elements in \(S\) but not in \(A\).
    \[
        \vert S \vert = \vert A \vert + \vert \overline{A} \vert 
    \]
\end{definition}

\begin{eg}
    Consider computer passwords of length 6, each symbol of which is taken from 0, 1, ..., 9 and a, b, ..., z. We would like to count the number of passwords that have repeated symbols. Let \(A\) be the set of such passwords. For instance, we have \(1223aq, bb333k \in A\), but \(123456 \notin A\). 

    We can then use the subtraction principle, i.e. count the number of passwords that contains all distinct symbols. 
    Then, we have
    \[
        \vert A \vert = \vert S \vert - \vert \overline{A} \vert = 36^6 - P(36, 6)
    \]
\end{eg}

\subsection{Division Principle}
Division principle states that if \(S\) is partitioned into \(k\) euqal-sized parts, then
\[
    k = \dfrac{\vert S \vert}{\text{number of elements in each part}}.
\]
\begin{definition}[Ceil function]
	Given a real number \(x\), define
	\[
		\lceil x \rceil =\ \text{least integer} \geq x
	\]
	The symbol \(\lceil x \rceil\) is usually read as "the ceil of \(x\)".
\end{definition}

\begin{proposition}[Pigeonhole Principle]
    Suppose that \(n\) objects are placed into \(k\) boxes. Then, at least one box has at least \(\lceil \dfrac{n}{k}\rceil \) objects. 
\end{proposition}
\begin{eg}
    51 distinct numbers are chosen from the integers between 1 and 100 inclusively.

    Let the 50 pairs of consecutive integers
    \[
        \{1, 2\}, \{3, 4\}, \dots, \{99, 100\}
    \]
    be the pigeonholes and the 51 numbers be the pigeons. Then two of the 51 numbers must be in the same pigeonholes. Therefore, there are 2 consecutive integers among the 51 chosen integers.
\end{eg}

\newpage
\section{Permutation and Combination}
\subsection{Permutation}
\begin{eg}
    Consider a set of \(n\) elements: \(S_0 = \{1, \dots, n\}\). We call \(S_0\) the ground set. Also, let \(r \geq 1\) be integer. An \(r\)-permutation of the \(n\)-elements ground set \(S_0\) is an ordered selection of \(r\) elements from \(S_0\). Let \(S\) be the set of all different \(r\)-permutations of the \(n\)-element ground set \(S_0\). For instance, when \(S_0 = \{1, 2, 3\}\) and \(r = 2\), we have
    \[
        S = \{(1, 2), (2, 1), (1, 3), (3, 1), (2, 3), (3, 2)\},
    \]
    where the order of the two elements matters. 
\end{eg}

For general values of \(n\) and \(r\). Let \(P(n, r)\) denotes this number. By performing the following ordered sequence of action,
\begin{table}[H]
    \centering
    \begin{tabular}{c|c}
            action & number of choices  \\
        \midrule
            \(A_1\): pick the 1st element & \(n\)   \\
            \(A_2\): pick the 2nd element & \(n - 1\)   \\
            \vdots & \vdots  \\
            \(A_r\): pick the \(r\)th element & \(n - r + 1\)
    \end{tabular}
\end{table}
Thus, we have
\[
    P(n, r) = n(n - 1)\cdots(n - r + 1) = \dfrac{n!}{(n - r)!}
\]

\subsection{Combination}
\begin{eg}
    Consider the ground set \(S_0 = \{1, \dots, n\}\) of \(n\) elements. Let \(r \geq 1\) be integer. An \(r\)-combination of the \(n\)-element ground set \(S_0\) is an unordered selection of \(r\) elements from \(S_0\). Let \(S\) be the set of all different \(r\)-combinations of the \(n\)-element ground set \(S_0\). For instance, when \(S_0 = \{1, 2, 3\}\) and \(r = 2\), we have
    \[
        S = \{(1, 2), (1, 2), (2, 3)\}
    \]
\end{eg}

For general values of \(n\) and \(r\), we can determine \(\binom{n}{r}\) by relating \(r\)-combinations to \(r\)-permutations. Indeed, observe that each \(r\)-permutation of \(S_0\) can be generated via the following ordered sequence of action:

\(A_1\): pick \(r\) elements from \(S_0\)

\(A_2\): order the \(r\) elements chosen from \(A_1\) to form the desired \(r\)-permutation.

Note that \(A_1\) has \(\binom{n}{r}\) choices, while \(A_2\) has \(r!\) choices. Hence, by the multiplication principle,
\[
    P(n, r) = \text{number of }r\text{-permutation of}\ S_0 = \binom{n}{r} \times r!
\]
Since
\[
    P(n, r) = \dfrac{n!}{(n - r)!},
\]
it follows that 
\[
    \binom{n}{r} = \dfrac{n!}{r!(n - r)!}
\]

\begin{corollary}
    \[
        \binom{n}{0} = 1, \binom{n}{1} = n, \binom{n}{n} = 1, \binom{n}{r} = 0\ (\text{whenever}\ n < r).
    \]
\end{corollary}